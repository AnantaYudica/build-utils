function(assert_condition is_not is_equal is_less is_greater is_str a b a_name b_name result msg)
    set(res FALSE)
    set(operator "")
    set(not_operator "=")
    if(is_less)
        set(operator "<")
        if(is_equal)
            if(is_str)
                if("${a}" STRLESS "${b}" OR ("${a}" STREQUAL "${b}"))
                    set(res TRUE)
                endif()
            else()
                if(${a} LESS ${b} OR (${a} EQUAL ${b}))
                    set(res TRUE)
                endif()
            endif()
        else()
            if(is_str)
                if("${a}" STRLESS "${b}")
                    set(res TRUE)
                endif()
            else()
                if(${a} LESS ${b})
                    set(res TRUE)
                endif()
            endif()
        endif()
    elseif(is_greater)
        set(operator ">")
        if(is_equal)
            if(is_str)
                if("${a}" STRGREATER "${b}" OR ("${a}" STREQUAL "${b}"))
                    set(res TRUE)
                endif()
            else()
                if(${a} GREATER ${b} OR (${a} EQUAL ${b}))
                    set(res TRUE)
                endif()
            endif()
        else()
            if(is_str)
                if("${a}" STRGREATER "${b}")
                    set(res TRUE)
                endif()
            else()
                if(${a} GREATER ${b})
                    set(res TRUE)
                endif()
            endif()
        endif()
    elseif(is_equal)
        set(operator "=")
        if(is_str)
            if("${a}" STREQUAL "${b}")
                set(res TRUE)
            endif()
        else()
            if(${a} EQUAL ${b})
                set(res TRUE)
            endif()
        endif()
    else()
        message(FATAL_ERROR "Error Condition Not Set")
    endif()

    if(is_equal)
        set(operator "${operator}=")
    endif()

    if(is_not)
        set(not_operator "!")
        if(res)
            set(res FALSE)
        else()
            set(res TRUE)
        endif()
    endif()

    set(${result} ${res} PARENT_SCOPE)
    if (NOT res)
        if(is_str)
            set(${msg} "((${a_name} : \"${a}\") ${operator} (${b_name} : \"${b}\")) ${not_operator}= FALSE" PARENT_SCOPE)
        else()
            set(${msg} "((${a_name} : ${a}) ${operator} (${b_name} : ${b})) ${not_operator}= FALSE" PARENT_SCOPE)
        endif()
    endif()
endfunction(assert_condition)

function(assert)
    cmake_parse_arguments(assert "NOT;EQUAL;LESS;GREATER;STR;FOREACH" 
        "CALL;RESULT" "ARGS" ${ARGN}) 

    if("${assert_CALL}" STREQUAL "" OR (NOT EXISTS "${assert_CALL}"))
        include(${TEST_UTILS_DIR}/assert/call.cmake)
    else()
        include(${assert_CALL})
    endif()

    set(condition FALSE)
    
    set(out "")
    assert_call(OUTPUT out ARGS ${assert_ARGS})

    if(assert_FOREACH)
        list(LENGTH assert_RESULT len)
        foreach(index RANGE ${len})
            list(GET assert_RESULT ${index} element_result)
            list(GET out ${index} element_out)
            assert_condition(assert_NOT assert_EQUAL assert_LESS 
                assert_GREATER assert_STR ${element_result} ${element_out} 
                "result[${index}]" "output[${index}]" condition msg)
            if(NOT condition)
                message(FATAL_ERROR "Error Assert Condition ${msg}")
                break()
            endif()
        endforeach()
    else()
        assert_condition(${assert_NOT} ${assert_EQUAL} ${assert_LESS} 
            ${assert_GREATER} ${assert_STR} ${assert_RESULT} ${out}  
            "result" "output" condition msg)
        if(NOT condition)
            message(FATAL_ERROR "Error Assert Condition ${msg}")
        endif()
    endif()

endfunction(assert)
